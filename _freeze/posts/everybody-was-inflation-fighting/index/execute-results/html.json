{
  "hash": "4b1f97fda1b731a7dc21718a18cd8c0d",
  "result": {
    "markdown": "---\nauthor: \"Yusuf Imaad Khan\"\ntitle: \"Everybody was inflation fighting...those hikes were fast as lightning\"\ndate: \"2024-09-15\"\nformat: html \ncode-tools: true\ncode-fold: false\nself-contained: true\nexecute:\n  echo: true\n  warning: false\n  message: false\n---\n\n\nThe US [Federal Reserve is set to reduce interest rates for the first time in four years](https://www.ft.com/content/a6e5cafe-01fa-4291-a7ba-f2b132ef6879). Rates were hiked up globally to kill off the [Great Inflation](https://www.ft.com/content/2ee6364e-3d48-447c-9b37-659d0f36d656) born of the [pandemic and Russia-Ukraine war](https://conference.nber.org/conf_papers/f197647.pdf). Hiking rates was a blunt and painful way to deal with inflation - it increased the cost of borrowing, tightened financial conditions, and squeezed economies. Countries the world over increased rates to tackle inflation and also to maintain dollar exchange rates. Worse, the rate hikes increased debt servicing costs for developing countries, precipitating [debt crises](https://jacobin.com/2022/06/developing-world-dollar-debt-crisis-inflation). And to really pile things on, the higher rates have likely impeded the speed and scale of [investment for the green transition](https://jacobin.com/2024/08/federal-reserve-rates-climate-inflation). Given the Federal Reserve's [primacy in the global financial system](https://www.phenomenalworld.org/analysis/the-imperial-fed/), this forthcoming rate cut is huge - [even if overdue](https://jacobin.com/2024/08/federal-reserve-rates-climate-inflation).\n\nAnyway, I was browsing the [FT inflation tracker](https://www.ft.com/content/088d3368-bb8b-4ff3-9df7-a7680d4d81b2) to have a look at how things are going across the world. The tracker doesn't have the very latest data for every country, but it's pretty good. On the tracker, you can see a bunch of useful charts breaking down figures for inflation and interest rates in various countries. But there is no big synoptic visual that jointly:\n\n-   Shows trends in inflation and interest rates between 2020-24\n-   Shows trends for every country/area on the tracker simultaneously\n-   Highlights countries that still have relatively high inflation\n\nSuch a visual would capture the [\"Great Inflation\"](https://www.ft.com/content/2ee6364e-3d48-447c-9b37-659d0f36d656) and the coordinated monetary tightening that took place. Such a visual might also disabuse us of a US-centric picture of inflation that sidelines other countries (no matter the primacy of the Fed). Maybe all this is a bit ambitious, but I had a go anyway. Watch out for the varying y-axes, hey:\n\n![](plot1.png)\n\nI made this using the data from the FT inflation tracker. A little bit of javascript written by chatGPT and thrown into the browser grabs the data for us in a nice format:\n\n\n```{ojs}\n//| eval: false\n\n// JavaScript code to extract data from FT chart and download as CSV\n\n(function() {\n    function jsonToCsv(items) {\n        const replacer = (key, value) => value === null ? '' : value; // handle null values\n        const header = Object.keys(items[0]);\n        const csv = [\n            header.join(','), // header row\n            ...items.map(row => header.map(fieldName => JSON.stringify(row[fieldName], replacer)).join(','))\n        ].join('\\r\\n');\n        return csv;\n    }\n\n    // Assuming the data is stored in _Flourish_data variable\n    var data = _Flourish_data.data.map(d => ({\n        Country: d.filter,\n        Date: new Date(d.label).toISOString().split('T')[0], // converting timestamp to ISO date\n        Policy_rate: d.value[0],\n        Annual_change_in_CPI: d.value[1]\n    }));\n\n    var csv = jsonToCsv(data);\n\n    // Create a link and download the CSV\n    var blob = new Blob([csv], { type: 'text/csv' });\n    var url = window.URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    a.setAttribute('hidden', '');\n    a.setAttribute('href', url);\n    a.setAttribute('download', 'flourish_data.csv');\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n})();\n\n```\n\n\nThen we load some libraries and do a bit of tidying up:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readr)\nlibrary(janitor)\n\n# Grab the data\n\nft_flourish_data <- read_csv(\"240913_flourish_data.csv\")\n\n# Put it in long format and relabel long country names so they're visible on facet\n\ninflation_data <- ft_flourish_data %>% \n  pivot_longer(3:4) %>% \n  clean_names() %>% \n  mutate(date=ymd(date)) %>% \n  mutate(country = case_when(\n    country == \"Czech Republic\" ~ \"Czech Rep.\",\n    country == \"Trinidad and Tobago\" ~ \"T&T\",\n    TRUE ~ country\n  ))\n\nglimpse(inflation_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 9,496\nColumns: 4\n$ country <chr> \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"U…\n$ date    <date> 2020-02-01, 2020-02-01, 2020-03-01, 2020-03-01, 2020-04-01, 2…\n$ name    <chr> \"Policy_rate\", \"Annual_change_in_CPI\", \"Policy_rate\", \"Annual_…\n$ value   <dbl> 0.750, 1.710, 0.100, 1.523, 0.100, 0.767, 0.100, 0.480, 0.100,…\n```\n:::\n:::\n\n\nThen create some more objects to add flags and variables to highlight countries with *recent* (they aren't the very latest figures for every country) inflation of \\>= 5% inflation:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Flag the most recent value for inflation + if its >= 5%\n\nrecent_val <- inflation_data %>% \n  filter(!is.na(value),\n         name==\"Annual_change_in_CPI\") %>% \n  group_by(country) %>% \n  mutate(most_recent = date == max(date)) %>%\n  mutate(flag = if_else(name == \"Annual_change_in_CPI\" & most_recent & value >= 5, TRUE, FALSE)) %>%\n  mutate(color_sq = if_else(flag, \"orange\", \"white\")) %>%\n  ungroup() %>% \n  filter(name == \"Annual_change_in_CPI\") #%>% \n  #mutate(norm_value = scales::rescale(value)) - I briefly thought about making the facets into a sort of heat map coloured by latest value of inflation. For this I needed to normalise values. It ended up looking a bit messy so I left it out.\n\n\n# Create a dataset for background rectangles\n\nbackground_data <- recent_val %>%\n  filter(most_recent) %>%\n  mutate(xmin = ymd(\"2020-01-01\"), \n         xmax = ymd(\"2024-09-01\"), \n         ymin = -Inf, ymax = Inf) \n```\n:::\n\n\nFinally, you just plot it:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggtext)\n\nplot1 <- ggplot(inflation_data, aes(date, value, group = name, colour = name)) +\n  \n  # Background rectangles\n  geom_rect(\n    data = background_data, \n    aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax, fill = color_sq),\n    inherit.aes = FALSE, alpha = 0.3\n  ) +\n  \n  # Line plot\n  geom_line(size = 0.9) +\n  \n  # Facet by country\n  facet_wrap(~country, scales = \"free_y\") +\n  \n  # Labels\n  xlab(\"\") + \n  ylab(\"\") +\n  \n  # Theme adjustments\n  theme_minimal() +\n  theme(\n    legend.position = \"none\",\n    plot.title.position = \"plot\",\n    plot.caption.position = \"plot\",\n    plot.caption = element_text(hjust = 0, size = 12),\n    plot.title = element_markdown(face = \"bold\", size = 36, margin = margin(b = 20)),\n    plot.subtitle = element_markdown(size = 26, margin = margin(b = 20)), \n    panel.grid.minor = element_blank(),\n    strip.text = element_text(face = \"bold\", size = 12, hjust = 0, margin = margin(b = 10)),\n    axis.text.x = element_text(angle = 90, hjust = 1)\n  ) +\n  \n  # Color scales\n  scale_fill_identity() +\n  scale_color_manual(values = c(\"#de425b\", \"#2f5d9e\")) +\n  \n  # Annotation: recent values (white text with background shadow)\n  geom_text(\n    data = recent_val %>% filter(most_recent),\n    aes(label = paste0(round(value, digits = 1), \"%\", \"\\n\", format(date, \"%d/%m\"))), \n    inherit.aes = FALSE, color = \"white\", fontface = \"bold\", \n    x = -Inf, y = Inf, hjust = -0.15, vjust = 1.2, size = 3\n  ) +\n  geom_text(\n    data = recent_val %>% filter(most_recent),\n    aes(label = paste0(round(value, digits = 1), \"%\", \"\\n\", format(date, \"%d/%m\"))), \n    inherit.aes = FALSE, color = \"black\",\n    x = -Inf, y = Inf, hjust = -0.1, vjust = 1.2, size = 3\n  ) +\n  \n  # Titles and labels\n  labs(\n    title = \"<span style = 'color: #de425b;'>Inflation</span> and <span style = 'color:#2f5d9e;'>Interest Rates</span> in 85 countries (+ Eurozone)\",\n    subtitle = \"<span style = 'color: #de425b;'>Annual Change in CPI</span> (%) and <span style = 'color:#2f5d9e;'>Policy Rate</span> (%), <span style = 'background-color: orange;'>Highlighted</span>: Recent Inflation >= 5%\",\n    caption = \"Source: FT, National statistics offices, central banks via LSEG • Policy rates for Eurozone countries are ECB rate\\nGraphic: Yusuf Imaad Khan / @yusuf_i_k\"\n  )\n\n# Save it as PNG\n\nggsave(\n  dpi = 600, width = 14, height = 14,\n  units = \"in\",\n       bg = \"white\",\n       plot = plot1,\n       \"plot1.png\",\n       type = \"cairo-png\")\n\n\n# Display the plot\n\nplot1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=1344}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n\n```{=html}\n<style>\n.flushright {\n   text-align: right;\n   margin-left: auto;\n   text-wrap: balance;\n   display: block; \n}\n\n</style>\n```\n\n::: {style=\"color: #5a6570; font-family: 'Source Serif Pro'; text-wrap: 'balance'\"}\n::: flushright\n*Everybody was inflation fighting*\n\n*Those hikes were fast as lightning*\n\n*In fact, it was a little bit frightening*\n\n*The green transition was threatened by global tightening*\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}